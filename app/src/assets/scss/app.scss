@use "sass:meta";
@use "sass:list";
@use "sass:color";

@viewport {
    min-width: 640px;
    max-width: 800px;
    zoom:      1;
    min-zoom:  1;
    max-zoom:  1;
    user-zoom: fixed;
    orientation: landscape;
}

// Configuration
@import "themes/default/light";
@import "themes/default/dark";
@import "variables";

// Jettix
@import "jettix";
@import "lib/scss/debug";

body {
    @extend %jx-debug-sticker;
}

// Application
#app {
    @extend %jx-app;
    background-color: #cccccc;
    align-content:   stretch;
    align-items:     start;
    justify-content: space-between;
    justify-items:   center;

    //@include %scheme-dominant;
    //@extend %scheme-dominant;
}

// Container
.app-container {
    @extend %jx-container;
    /*@extend %jx-grid-12;*/
}

// Main
.app-main {
    @extend %jx-main;
    background-color: white;

    > .app-container {
        display: grid;
        align-content: start;
        min-height:    $main_height;
    }
}

// Header
.app-header {
    @extend %jx-header;
    background-color: burlywood;
    //position: sticky;
    //top:      0;

    > .app-container {
        min-height: $header_height;
        //align-items: center;
    }
}

// Footer
.app-footer {
    @extend %jx-footer;
    background-color: #b3d4fc;

    > .app-container {
        min-height: $footer_height;
    }
}

// Debug
.outline > * {
    outline: 1px solid #dddddd;
}

.row-test {
    @extend %jx-row, .outline;

    > :first-child {
        @extend %jx-col-b10-3, %jx-col-b9-5, %jx-col-b8-6;
    }
}

//%container {
//    $container_shrink: 20px;
//    $container_expand: calc((100vw - $container_width) * .5 + $container_shrink);
//
//    // больше
//    @media only screen and (min-width: calc($container_width + $px)) {
//        padding-left:  $container_expand;
//        padding-right: $container_expand;
//    }
//
//    // меньше
//    @media only screen and (max-width: $container_width) {
//        overflow-x:    hidden;
//        padding-left:  $container_shrink;
//        padding-right: $container_shrink;
//    }
//}


/// ## Color Schemes
//----------------------------------------------------------
// .%scheme-[dominant, primary, secondary, tertiary, accent, info, success, warning, error]
// .%scheme-[dominant, ..., error]-dark
// .%scheme-[dominant, ..., error]-light
//
// .%scheme-border-[dominant, primary, secondary, tertiary, accent, info, success, warning, error]
// .%scheme-border-[dominant, ..., error]-dark
// .%scheme-border-[dominant, ..., error]-light
//
// .%scheme-state-[dominant, primary, secondary, tertiary, accent, info, success, warning, error]
// .%scheme-state-[dominant, ..., error]:[hover, active, visited, target, focus, focus-visible, focus-within]
//----------------------------------------------------------
///
/// ### Examples with dominant color
///
/// #### Base schemes:
///
/// ```css
/// .scheme-dominant {
///     background-color: #dffddd;
///     color:            black;
/// }
///
/// .scheme-dominant-dark {
///     background-color: #dffddd;
///     color:            black;
/// }
///
/// .scheme-dominant-light {
///     background-color: #dffddd;
///     color:            black;
/// }
/// ```
///
/// #### Border schemes:
///
/// ```css
/// .scheme-border-dominant {
///     background-color: #dffddd;
///     color:            black;
///     border-color:     orange;
/// }
///
/// .scheme-border-dominant-dark {
///     background-color: #dffddd;
///     color:            black;
///     border-color:     orange;
/// }
///
/// .scheme-border-dominant-light {
///     background-color: #dffddd;
///     color:            black;
///     border-color:     orange;
/// }
/// ```
///
/// #### State schemes:
///
/// ```css
/// .scheme-state-dominant {
///     background-color: #dffddd;
///     color:            black;
///     border-color:     orange;
/// }
///
/// .scheme-state-dominant:hover {
///     background-color: #dffddd;
///     color:            black;
///     border-color:     orange;
/// }
///
/// .scheme-state-dominant:active {
///     background-color: #dffddd;
///     color:            black;
///     border-color:     orange;
/// }
///
/// .scheme-state-dominant:visited {
///     background-color: #dffddd;
///     color:            black;
///     border-color:     orange;
/// }
///
/// .scheme-state-dominant:target {
///     background-color: #dffddd;
///     color:            black;
///     border-color:     orange;
/// }
///
/// .scheme-state-dominant:focus {
///     background-color: #dffddd;
///     color:            black;
///     border-color:     orange;
/// }
///
/// .scheme-state-dominant:focus-visible {
///     background-color: #dffddd;
///     color:            black;
///     border-color:     orange;
/// }
///
/// .scheme-state-dominant:focus-within {
///     background-color: #dffddd;
///     color:            black;
///     border-color:     orange;
/// }
/// ```
//**********************************************************
@mixin color-scheme($background, $ink, $border: null) {
    background-color: $background;
    color:            $ink;

    @if $border {
        border-color: $border;
    }
}

@mixin color-scheme-state($state, $background, $ink, $border: null) {
    &:#{$state} {
        @include color-scheme($background, $ink, $border);
    }
}

@each $key, $value in $color-schemes {
    #{JX(scheme-#{$key}, ".%")} {
        @include color-scheme(list.nth($value, 1), list.nth($value, 2));

        @each $theme in (dark, light) {
            $sign: if($theme == dark, -1, 1);
            &-#{$theme} {
                @include color-scheme(
                        color.scale(list.nth($value, 1), $lightness: 20% * $sign),
                        list.nth($value, 2)
                );
            }
        }
    }

    @if length($value) == 3 and list.nth($value, 3) != null {
        #{JX(scheme-border-#{$key}, ".%")} {
            @extend #{JX(scheme-#{$key}, ".%")};
            border-color: list.nth($value, 3);
        }
    }
}

// State Schemes
@each $key, $value in $color-scheme-states {
    #{JX(scheme-state-#{$key}, ".%")} {
        @extend #{JX(scheme-#{$key}, ".%")};

        //@if meta{
        @extend #{JX(scheme-border-#{$key}, ".%")};
        //}

        @each $state, $scheme in $value {
            &:#{$state} {
                @include color-scheme(list.nth($scheme, 1), list.nth($scheme, 2));
            }
        }
    }
}

//:root {
//    --jx-scheme-#{$key}-bg:  #{list.nth($value, 1)};
//    --jx-scheme-#{$key}-ink: #{list.nth($value, 2)};
//}

.app-main {
    @extend %jx-scheme-border-error;
    @extend %jx-scheme-state-dominant;
}