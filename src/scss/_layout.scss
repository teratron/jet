//**********************************************************
// Layout
//----------------------------------------------------------
// layout
// grid
// grid-[1...12]
// row
// col
// col-[1...12]
// col-b[1...12]-0
// col-b[1...12]-[1...12]
// span-[1...12]
// order-[1...12]
// order-b[1...12]-[1...12]
//
//
//
//
//**********************************************************
// @import "layout/grid";
// @import "layout/column";
// @import "layout/tile";

// Layout
.#{$prefix}layout {
    width: 100%;
    max-width: $layout_width;
    margin-left: auto;
    margin-right: auto;

    @include setPropsAdaptive(
        (
            padding-left: $layout_gap,
            padding-right: $layout_gap,
        )
    );
}

// Grid
.#{$prefix}grid {
    display: grid;
    grid-auto-rows: minmax($grid_cell_height, auto);
}

%grid {
    @extend .#{$prefix}grid;
    grid-auto-flow: dense;

    @include setPropsAdaptive(
        (
            grid-gap: $grid_gap,
        )
    );
}

.#{$prefix}row {
    @extend .#{$prefix}grid;
    grid-template-columns: repeat(auto-fit, minmax($grid_cell_height, auto));
    grid-auto-flow: column;
}

.#{$prefix}col,
%col {
    width: auto;
    max-width: none;
}

@for $i from 1 through $grid_column {
    .#{$prefix}grid-#{$i} {
        grid-template-columns: repeat($i, 1fr);
        @extend %grid;
    }

    .#{$prefix}col-#{$i},
    .#{$prefix}grid-#{$i},
    .#{$prefix}grid-#{$i} > .#{$prefix}col,
    .#{$prefix}grid-#{$i} > .#{$prefix}row {
        grid-column-end: span $i;
    }

    .#{$prefix}col-#{$i} {
        @extend %col;
    }

    .#{$prefix}span-#{$i} {
        grid-column-start: $i;
    }

    .#{$prefix}order-#{$i} {
        order: $i;
    }
}

.#{$prefix}list {
    @extend .#{$prefix}grid;
    grid-template-rows: repeat(auto-fill, minmax($grid_cell_height, auto));
    grid-auto-flow: row;
}

// Shrink
@for $i from $grid_column to 1 {
    $k: $i - 1;

    @media only screen and (max-width: getBreakpoint($k)) {
        .#{$prefix}shrink {
            &,
            > %grid-#{$i} {
                grid-template-columns: repeat($k, 1fr);
            }

            > %col-#{$i},
            > .#{$prefix}grid-#{$i} > .#{$prefix}col,
            > .#{$prefix}grid-#{$i} > .#{$prefix}row {
                grid-column-end: span $k;
            }
        }

        @for $j from $i through $grid_column {
            .#{$prefix}col-#{$j},
            .#{$prefix}grid-#{$j} {
                @extend %col-#{$i};
                @extend %grid-#{$i};
            }
        }
    }
}

%display-initial {
    display: initial;
}

// Breakpoint action
@for $i from $grid_column to 1 {
    @media only screen and (max-width: getBreakpoint($i)) {
        .#{$prefix}col-b#{$i}-0 {
            display: none;
        }

        @for $j from 1 through $grid_column {
            .#{$prefix}col-b#{$i}-#{$j} {
                @at-root (without: media) {
                    @extend %display-initial;
                }

                grid-column-end: span $j;
            }

            .#{$prefix}order-b#{$i}-#{$j} {
                order: $j;
            }
        }
    }
}
