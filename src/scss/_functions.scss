//**********************************************************
// Functions
//----------------------------------------------------------
//
//**********************************************************
@use "sass:math";
@use "sass:list";

// Grid
@function GetMinShrinkCellWidth($n: $grid_column) {
    $w: GetBreakpoint($n - 1);

    @if math.unit($w) == "px" {
        $w: $w + 2;
    } @else if math.unit($w) == "rem" {
        $w: $w + 2 * $px;
    }

    $a: math.div($w, 100);
    $b: $layout_gap_adaptive * ($n + 1);
    $c: $w - $a * $b;

    @return math.div($c, $n);
}

// Breakpoints
@function GetListBreakpoints() {
    $list: [];
    $b: $layout_gap_adaptive * 2;
    $g: 100 - $b;

    @for $i from 1 through $grid_column {
        $s: math.div($i * $grid_col_width, $g) * $layout_gap_adaptive;
        $d: $i * $grid_cell_width + ($i + 1) * $s;

        @if math.unit($d) == "px" {
            $d: math.round($d) - 1;
        } @else if math.unit($d) == "rem" {
            $d: $d - $px;
        }

        $list: list.append($list, $d);
    }

    @return $list;
}

@function GetBreakpoint($n: $grid_column) {
    @return list.nth($list_breakpoints, $n);
}

// Helpers
@function StripUnit($value) {
    @return math.div($value, ($value * 0 + 1));
}

@function PxToRem($value) {
    @if math.unit($value) == "px" {
        @return $px * StripUnit($value);
    }

    @return $value;
}

@function RemToPx($value) {
    @if math.unit($value) == "rem" {
        @return math.round($root_cell_width * StripUnit($value));
    }

    @return $value;
}